INC_CLIENT()

SWEP.ViewModelFOV = 70

SWEP.ShowViewModel = false
SWEP.ShowWorldModel = false

SWEP.VElements = {
	["4"] = { type = "Model", model = "models/props_c17/utilityconnecter006c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(0, 0, 17.142), angle = Angle(0, 0, 0), size = Vector(0.28, 0.28, 0.28), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["1"] = { type = "Model", model = "models/props_lab/rotato.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(0, 0.1, 10), angle = Angle(0, 0, 90), size = Vector(0.625, 1.014, 0.625), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["element_name"] = { type = "Model", model = "models/props_lab/powerbox02b.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(-0.519, 0.518, 2.596), angle = Angle(0, -150.78, 180), size = Vector(0.432, 0.432, 0.432), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["2"] = { type = "Model", model = "models/props_c17/utilitypolemount01a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(-4.676, -7.5, 1.7), angle = Angle(-180, 30, 0), size = Vector(0.15, 0.2, 0.15), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["6"] = { type = "Model", model = "models/props_c17/utilityconnecter006.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(2.596, 5.714, -0.519), angle = Angle(0, 30, 0), size = Vector(0.4, 0.649, 0.4), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["5"] = { type = "Model", model = "models/props_c17/utilityconnecter006.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(3.635, 6.752, 5.714), angle = Angle(0, 30, 0), size = Vector(0.4, 0.649, 0.4), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["palka"] = { type = "Model", model = "models/props_c17/signpole001.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.5, 1.557, -30), angle = Angle(0, 45, 0), size = Vector(0.699, 0.699, 0.389), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_vents/borealis_vent001b", skin = 0, bodygroup = {} }
}
SWEP.WElements = {
	["4"] = { type = "Model", model = "models/props_c17/utilityconnecter006c.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(0, 0, 17.142), angle = Angle(0, 0, 0), size = Vector(0.25, 0.25, 0.25), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["1"] = { type = "Model", model = "models/props_lab/rotato.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(0, 0.2, 10), angle = Angle(0, 0, 90), size = Vector(0.625, 1.014, 0.625), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["element_name"] = { type = "Model", model = "models/props_lab/powerbox02b.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(-1, 0.518, 2.596), angle = Angle(0, -150.78, 180), size = Vector(0.432, 0.432, 0.432), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["2"] = { type = "Model", model = "models/props_c17/utilitypolemount01a.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(-6.753, -7.792, 1.7), angle = Angle(-180, 33.895, -1.17), size = Vector(0.15, 0.2, 0.15), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["6"] = { type = "Model", model = "models/props_c17/utilityconnecter006.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(2.596, 5.4, 4.675), angle = Angle(0, 31.558, 0), size = Vector(0.4, 0.649, 0.4), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["5"] = { type = "Model", model = "models/props_c17/utilityconnecter006.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "palka", pos = Vector(2.596, 5.714, -0.519), angle = Angle(0, 32, 0), size = Vector(0.4, 0.649, 0.4), color = Color(255, 255, 255, 255), surpresslightning = false, material = "", skin = 0, bodygroup = {} },
	["palka"] = { type = "Model", model = "models/props_c17/signpole001.mdl", bone = "ValveBiped.Bip01_R_Hand", rel = "", pos = Vector(2.596, 1, -32.728), angle = Angle(0, 66.623, 0), size = Vector(0.755, 0.625, 0.432), color = Color(255, 255, 255, 255), surpresslightning = false, material = "models/props_vents/borealis_vent001b", skin = 0, bodygroup = {} }
}

local ghostlerp = 0
function SWEP:GetViewModelPosition(pos, ang)
	local owner = self:GetOwner()
	if self:IsSwinging() then
		local rot = self:GetDTInt(10) == 1 and Angle(0, -240, -70) or self.SwingRotation
		local offset = self:GetDTInt(10) == 1 and Vector(-200, 30, -40) or self.SwingOffset
		local armdelay = owner:GetMeleeSpeedMul()
		local swingtime = self.SwingTime * (owner.MeleeSwingDelayMul or 1) * armdelay

		ang = Angle(ang.pitch, ang.yaw, ang.roll) -- Copy

		local swingend = self:GetSwingEnd()
		local delta = swingtime - math.Clamp(swingend - CurTime(), 0, swingtime)
		local power = CosineInterpolation(0, 1, delta / swingtime)

		if power >= 0.9 then
			power = (1 - power) ^ 0.4 * 2
		end

		pos = pos + offset.x * power * ang:Right() + offset.y * power * ang:Forward() + offset.z * power * ang:Up()

		ang:RotateAroundAxis(ang:Right(), rot.pitch * power)
		ang:RotateAroundAxis(ang:Up(), rot.yaw * power)
		ang:RotateAroundAxis(ang:Forward(), rot.roll * power)
	end

	if owner:GetBarricadeGhosting() then
		ghostlerp = math.min(1, ghostlerp + FrameTime() * 4)
	elseif ghostlerp > 0 then
		ghostlerp = math.max(0, ghostlerp - FrameTime() * 5)
	end

	if ghostlerp > 0 then
		pos = pos + 3.5 * ghostlerp * ang:Up()
		ang:RotateAroundAxis(ang:Right(), -30 * ghostlerp)
	end

	return pos, ang
end
